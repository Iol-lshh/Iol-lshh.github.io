{"componentChunkName":"component---src-templates-blog-post-js","path":"/회고/tdd/tdd/","result":{"data":{"site":{"siteMetadata":{"title":"Iol-lshh's","siteUrl":"https://iol-lshh.github.io"}},"markdownRemark":{"id":"ae17b33a-162e-5173-8078-531428d19898","excerpt":"어떤 분이 쓰신 글을 읽었는데, “시간이 부족해서 테스트 코드 짤 시간이 없어요”는 이제 변명이 되지 못한다는 것이다. AI의 도입이, '딸깍'으로 테스트 코드를 작성해주기 때문이다. 애플리케이션 코드를 AI…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e28d8b96018dbc64f86ccfd15632f20/437a1/header.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4klEQVR42h1R6U8TcRRc7CLd7m5/e9/3lu4uFUogVBRqoRQKBAKi0YCUo4oHqBwGapGYAKIt4VTwgyaCiYYYE6Mm+gn921xMXibzZWbevAfJEU+P1apuTI56suVgrDI10ne8OXewOn24/vD16szbl3MftgtHu8XXGwujw0PJdNqJNzGaHSR5SDSjxoVazYlJlsNrNgz4GwNdfz6Vv79f/3VcOj3Z+fpuY/3Z41xuuCPbLboNlZR8PkxXArrifBCiZYOUNZQRQ5QARC3EKt292d+f9/9+2f95VLqXH2lta09cSdc3J+1YXLLdKoKHAjAeRuOeAaGsRCmmGPE0L655dVLEk6q9uostE/nxTFcH4FVOMbSIQ3JiFWDCnERw4tXs5a3inZP9AqTXxBUnxmoWEBSMEzFWDNE8ygi8brnx+uqamBV1OFmzauosUweMoFr2t4Pi6fGLj6VZCAgySvOUrPniMC+jDM9qJqcaom4aUcd2PdNxsgPX8vnc2sK46bidVxI/Dp7uPp3MDaQgwbBpRcdYwXdRnVi6f6gx2SZZEUEzWEkVDYsWZUqQsm1Nk8P9um2X5keKU4M9qcZEQw3EqLoadRtaU9dy+enF5aW18s3b9514A07RimXjNAOjYRgjgiTLawYvCp3JxvTl+o6W+r5MMzQ0MjpbWF55UX5e2l5cfXnr7kwilQGcgJEUyfGVaNgfOBQGLO9DIIhCQRylGNeNjA+lodLu3ubem7XyVn760aX2DCOpCEFhFIORNALIimAogGAwCmAECyCob1SFE4EQgGDkek8rtLG59WB2PpFMcYru12NllVN1PzmIEzCCwiEc/i+oxMA5BPPxrEIY9LY1vpofhlo6MoLun1eXDEs0bb+YzxlZxWnOXwEhaJzlfR4iGZ8HUECx9Nhgaq8wtl8chyTT1qod2bTVSFQ+E5uCYTFn+QYpSLSkAE4keInwP0oy1bb2ZKLvcCW/s5TbLYz9A9H5mp3P29QWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5e28d8b96018dbc64f86ccfd15632f20/dc87c/header.avif 158w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/383b4/header.avif 315w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/d0061/header.avif 630w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/20e2c/header.avif 945w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/9eba6/header.avif 1260w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/c68af/header.avif 1536w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/5e28d8b96018dbc64f86ccfd15632f20/5787a/header.webp 158w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/89f54/header.webp 315w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/4d353/header.webp 630w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/0f41d/header.webp 945w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/f27a3/header.webp 1260w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/a8642/header.webp 1536w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5e28d8b96018dbc64f86ccfd15632f20/dda05/header.png 158w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/679a3/header.png 315w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/50637/header.png 630w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/fddb0/header.png 945w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/f46b1/header.png 1260w,\n/static/5e28d8b96018dbc64f86ccfd15632f20/437a1/header.png 1536w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5e28d8b96018dbc64f86ccfd15632f20/50637/header.png\"\n            alt=\"header\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>어떤 분이 쓰신 글을 읽었는데, “<strong>시간이 부족해서 테스트 코드 짤 시간이 없어요</strong>”는 이제 변명이 되지 못한다는 것이다. AI의 도입이, '<strong>딸깍</strong>'으로 테스트 코드를 작성해주기 때문이다.</p>\n<p>애플리케이션 코드를 AI에 의존해 전적으로 작성하는 건 여전히 불안하다. 비즈니스 로직과 직결되기 때문이다. 하지만 테스트는 비교적 부담이 적다. 결정적인 장애로 이어지지 않고, 설령 품질이 낮더라도 나중에 참고하여 새로 작성할 수 있기 때문이다. 물론 지나치게 의존성이 많고 유지보수가 어려운 '나쁜 테스트'는 피해야 하지만, <strong>테스트는 없는 것보다, 못생긴게 훨씬 낫다</strong>.</p>\n<blockquote>\n<p>내게 <strong>레거시 코드란, 단순히 테스트 루틴이 없는 코드</strong>다.<br>\n테스트 루틴이 없는 코드는 나쁜 코드다. 코드가 얼마나 훌륭하게 작성돼 있는지 여부와는 상관없다. <strong>아무리 깔끔하고 객체 지향적이며 캡슐화가 잘돼 있어도 소용없다.</strong> 테스트 루틴이 있으면, 코드의 동작을 빠르게 검증하며 수정할 수 있다. 테스트 루틴이 없으면 우리가 작성하고 있는 코드가 좋아지고 있는지, 나빠지고 있는지 제대로 알 수 없다. - Working Effectively with Legacy Code (Feathers, 2004)</p>\n</blockquote>\n<p>테스트 코드가 TDD로만 이루어진 것은 아니다. 테스트 코드의 본질적인 목적은 <strong>회귀 방지</strong>와 <strong>인수</strong>다. 이에 대해서는 개략적으로 <a href=\"https://iol-lshh.github.io/%ED%9A%8C%EA%B3%A0/test/%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%A0%95%EB%A6%AC/\">이전 글</a>에서 정리했으므로 넘어간다.</p>\n<p>어쨌든, 이번에 루퍼스라는 과정에서 TDD 파트를 공부하게 되었다. 그러면서 바이브 코딩을 통해 TDD 빠르게 작성하는 프로세스를 갖춰보고자 하는 포부를 가져봤다. 이번엔 TDD에 대해 간략히 설명하고, 내가 작성한 방식에 대해 이야기해보려고 한다.</p>\n<hr>\n<h2>TDD 기초</h2>\n<p>테스트 코드에 대한 논의는 아주 오래전부터 계속되어왔으나, TDD(Test Driven Development, 테스트 주도 개발)가 실무에서 최초로 쓰인 것은 1997년 켄트 벡이 크라이슬러 종합 보상 시스템을 만들면서 등장했다.</p>\n<p>당시 켄트 벡은 XP(Extreme Programming, 극한 개발)라는 것을 처음으로 실무에 도입했다. XP는 개발 생산성을 극한으로 올리고자 등장한 개발 방법론들의 모음으로, 소프트업계 애자일의 시초라고 할 수 있다. 이 XP에 포함된 TDD는 <strong>애플리케이션의 기능을 구현하기 전에, 먼저 구현하려는 기능에 대한 테스트 코드를 작성하고, 테스트를 돌려가며 기능을 완성</strong>하는 개발 방법론이다.</p>\n<p>레드, 그린, 리팩토링이라는 세 가지 프로세스를 거치는데,</p>\n<ul>\n<li><strong>레드</strong>: 구현하려는 기능에 대한 테스트 코드를 작성한다. 이 때 테스트 코드는 실패한다.</li>\n<li><strong>그린</strong>: 기능을 구현한다. 테스트 코드는 성공한다.</li>\n<li><strong>리팩토링</strong>: 애플리케이션의 유지보수가 용이하도록 코드 품질을 높인다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f149311855c7771b8e52c5e24e0b9c4/f1720/tdd.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6klEQVR42m2Sz0sbQRTH/e8EobaSUzBtUKqFCqIpAWtMemgEA0njKVhMC7UIObSNoK16EBVqIZqgpttqxE3apgnZNKk7m3V3ZjY709nduN0EH3OYH9/Pe9/3mD7aE4QYi1KV50vBYCkQuC4UnPfO6OslKcWNxu94/Lvbfen3X0xMcENDP0IhlssW3AabD6jEnw0Pf3O5yrHYudd75vFUEonC6OjXgQEplzVUun5rZYIp5aKJc+8DWK2y89Xenri/z9S6qvA+3+U9lyYBZ/0ObKXbyrc9L64aPwWnQWLuoCCsxWe3jzcNMdG7YVP6PI2nVhDbaFgTRVESRUWWW62WbuaOHCTnNiM22YHtIfhXUWTdgBHG+Xye47gjMwAw3L7+sjqdDipYNRHSBbPiMyl0Jwpf7WrsDgCpVqvV6/VKtcIUB8XM5PvA7Ma8qErdsEmXm2R8GU6twJElWKrrdi+GkTaO775kK7y9mPt1aj51wyoiT1Pobkx9lIQCINaorAotKIc+RcZST2bWw1VQs6fYGZhVAyjkXUYbjELWfLbY/itTQWoyw3MfF+6/fZzKrf2Rm7bn3h9mWTji2+NJtX8BPVwG0x/C7jdjvvSzz3zGwsj/+fZ8z5s+IabZor5xjHcKh7nyyTVSnF3Y8D9uW7OsZmah/AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2f149311855c7771b8e52c5e24e0b9c4/dc87c/tdd.avif 158w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/383b4/tdd.avif 315w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/d0061/tdd.avif 630w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/20e2c/tdd.avif 945w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/c509e/tdd.avif 1024w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/2f149311855c7771b8e52c5e24e0b9c4/5787a/tdd.webp 158w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/89f54/tdd.webp 315w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/4d353/tdd.webp 630w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/0f41d/tdd.webp 945w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/44907/tdd.webp 1024w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2f149311855c7771b8e52c5e24e0b9c4/dda05/tdd.png 158w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/679a3/tdd.png 315w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/50637/tdd.png 630w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/fddb0/tdd.png 945w,\n/static/2f149311855c7771b8e52c5e24e0b9c4/f1720/tdd.png 1024w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2f149311855c7771b8e52c5e24e0b9c4/50637/tdd.png\"\n            alt=\"tdd\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>때문에 TDD의 테스트는 블랙 박스와 같다. 어떤 로직이 만들어질지 아직 상상은 안가지만, 요구사항에 맞는 결과를 미리 짜놓고, 구현하기 시작하니 오버 엔지니어링을 막고, 회귀를 방지하는 큰 효과를 가지고 있다.</p>\n<p>이런 관점에서 보면, TDD를 이상적으로 적용하려면 <strong>도메인 설계</strong>와 <strong>요구사항 정의</strong>가 선행되어야 한다. 하지만 현실적으로 도메인 설계가 잘 이뤄지는 회사가 어디 있겠는가. 현실적으로 기능 단위의 요구사항을 먼저 정의하고, 그에 맞는 인터페이스로 TDD를 적용하는 것이 실용적이다. 결국 서비스 계층이나 유스케이스 수준에서 TDD를 수행하는 것이 가장 수월하게 느껴진다.</p>\n<p>그렇기에 나는 애플리케이션의 기능 로직 단에서 TDD를 수행한다. 이후 나머지 필요한 테스트들(도메인 모델, E2E, 경계 등)을 추가로 작성했다.</p>\n<hr>\n<h2>TDD 프로세스 (feat. 바이브 코딩)</h2>\n<p>본 예제는 루퍼스 학습 과정에서 제공되는 템플릿을 이용했다. 이 템플릿은 컨테이너 디비를 이용하기 쉽게 도와준다. 또한 <code class=\"language-text\">tearDown()</code> 함수가 데이터를 전부 비워주도록 하여, 테스트의 독립성을 보장해준다. 컨테이너 디비가 일종의 페이크 객체 역할을 해주므로, 통합 테스트이지만 공유 자원(영속성이나 외부 자원)이 상당히 독립되게 된다.</p>\n<h3>RED</h3>\n<p>이런 도구들을 이용해 빠르게 애플리케이션의 요구사항 기능을 먼저 테스트로 작성한다. 이것이 TDD의 Red다. 하지만 요구사항만 보고 기능의 테스트를 완성시키기가 좀 막막할 수도 있다. 원래 빈 종이에 첫 선을 그리는게 가장 어렵지 않은가. 이럴 때 AI 조수가 있다면 어떨까?</p>\n<p>AI 조수한테 테스트를 어떻게 만들어 달라고 하면 좋을까?</p>\n<ol>\n<li>원하는 결과물 샘플을 제공한다.</li>\n<li>원하는 요구사항을 제공한다.</li>\n<li>결과물을 수정한다.</li>\n</ol>\n<p>이런 순서에 따라 테스트 코드를 작성하는데 여러 IDE와 여러 AI 툴들이 있겠지만, 나는 커서를 사용하고 있다.</p>\n<p>루퍼스 템플릿에는 테스트 예제가 있다. 이 예제를 결과물 샘플로 제공할 것이다. 그 예제를 기반으로 새로운 채팅을 연다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 529px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/35adb68c67211e5ddf92c5a9e6e632a2/28906/1_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEDElEQVR42k1UWW8bVRSel6LESWtn85p4i9csRiGhQqqT0vQZBEJIQNKCQBWCV56QoBSJF6AlaaqWAqqUvc7ixPs645mxM2miUh74Qx/n3LFNHj6de0f3fvOd75xzJbvdDr/fj0gkIiJjfHxcxKGhIQwPDwvwudHRUfh8PhE9Hs8FuBH0jiMcjUByOBwYGxvD5OSkIOHL/I0JeD0yMiLA35iIz/B5XnfApBF/FFOJBCQ+7KTDIVIVDAYFEWOEyFihzWaD1WoV4O9Op4uig35ib4Pv2+FxkPpAAFKASKKBIN56YxZv37iBxcVFzC8siHUymcTMzAxmZ+eQnE8KXL++gHleJ68JXKMzN2/Oi/XVq29C8lIKQSKco0uJxOsIhcIIh8PC08mpKUoxgK++/hLZwhG2dteRPt6D3KigrpRFVNQKZKUEvVnD3v52O2VCmOSGiKiTeoD2nOKlS69hafkTFEoZpFLbOEyn0NBrXeitOppEZhgKspl9SHbyz+N0Ih6OIBqLkcJQV6HX64XFYsGt20s4yhxgffMZdlObyObSqMtlKFoNGpFpehU6kWcyKZPQTYQRIuGKOWntcrlE5MpaLH1YvrWEUiWHfP4Y+aIJTllRqwINrQrjhYqj4+dthVStKKU5Qa3D7TNF3nHk9ujt7RUKy9UcKrUC5DaJTIR18lBmD9UyWieK6aHoQ+qjOKUbjUZFup2GdbqcJuFnt1GiFFPk30H2EMV6CUqrAbkpo67LFOtonTWRzh6QQjLe53Z3CWMU2T+eFvbz8hUrPv3oQ5TTO0hv/YXc3gby++Rjah1VSrFZzUIvH+FMyaN4sGUSBsizGJHF43FMT093U44QYc/lK/hmYQ7G6o+o/fI9lAf3UP/1LuT7jB/QfPgT/nm2gn831mD8/K3pIStkZZ224Zbh1hmjIvX0WnDng3eg7fyJ3B+rqG78DuNoC0Z6E8bhBk4pvqD93/nnqKw/IQ9pjHx0MUIKuQhcYfbPTT/htrFZbVhmD5UKDqnKVfJMJb9M6AKNUw3aeQuZSh5S3EfpkqoYpZug4Wal/786QTGrS8sfI0uG5/JpamQZzZZCVW20oaBJ0KlAGSqY5B91iSeJlTGYYGBgAIODg+K16ekx26Yml6h18tCY0CCiUxUtg3CiEqG5zxWOIbnYP1LHZB2Si09WXx81NhFmSV1qfwcVuQidCQy1C50Ua6SwUMpCYq+4XZjw4oPaeVQ7k1KkSdnd20amkBYjp+p1qE0T3Oi85/GUeNy4GKKRadw6IycU0rq/vx+f3/kCVU2hhq6IBj5/dYqzlycC5y8NM74yTIXsHxdiYmJCRC4MT0vn5Wa8+977WHn8GGtPn2LtySOsPvoNq2sPulh5eF/Eu/e+w3/ud0HOGdbxSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/35adb68c67211e5ddf92c5a9e6e632a2/dc87c/1_1.avif 158w,\n/static/35adb68c67211e5ddf92c5a9e6e632a2/383b4/1_1.avif 315w,\n/static/35adb68c67211e5ddf92c5a9e6e632a2/e9669/1_1.avif 529w\"\n              sizes=\"(max-width: 529px) 100vw, 529px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/35adb68c67211e5ddf92c5a9e6e632a2/5787a/1_1.webp 158w,\n/static/35adb68c67211e5ddf92c5a9e6e632a2/89f54/1_1.webp 315w,\n/static/35adb68c67211e5ddf92c5a9e6e632a2/93813/1_1.webp 529w\"\n              sizes=\"(max-width: 529px) 100vw, 529px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/35adb68c67211e5ddf92c5a9e6e632a2/dda05/1_1.png 158w,\n/static/35adb68c67211e5ddf92c5a9e6e632a2/679a3/1_1.png 315w,\n/static/35adb68c67211e5ddf92c5a9e6e632a2/28906/1_1.png 529w\"\n            sizes=\"(max-width: 529px) 100vw, 529px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/35adb68c67211e5ddf92c5a9e6e632a2/28906/1_1.png\"\n            alt=\"1 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그렇게 열린 채팅에 요구사항들을 적으면 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 578px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36ceda37c3234c7b985fc5e5aacfa85e/56022/1_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.68354430379748%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEoklEQVR42qVW21IiSRDlD1ZAUG6NgkADDc2tuSggIIKrQ4jMiDqzjor6YGzE/P/b2TzVlMM4uquxDyeyqrrqVGZWXtqTy+Ww126j2Wyi1SJaaqzBeSwWg8/nw/r6+m/Y2NhAOBxWMhgMwhORiZXPo1KpwS6VYNsllMoVJePxOAzDQCQSQSgUehUk0+Dckxey4cEQe3tt9PsD9Hp9tDsd1BsN1BwH/P7y4FtQhNvb2ygUCrCsPIrFIqrVqpK2baNcLmNra+tjhJlMRvkqm80ilUrBNE2k02lwnfPNzc13kT0Tkuj09FR8WFHmUStHTLUsS2nOOX34bkK+4G5rF4PBQHzYx2g0QrfbVa87mUyeffgeUkVI8xryAPQbD0WjUfWRY4IX6s3/RqYvVITT6RTj8VhpRJycnOD4+FhpTHcwCkLhtwnpZw0PX5H+o7/0CxOWVVAPQ1+WJD6pqdb6JagU34JcnnDYNTMSCSsZCATg9a7BL5kRCKzD7/erLOE6s2FzmREca1CBWq2GRCIhmSI3OPWmZIloWSwhm8srZMyskoWiLd/KKFWqSKUZSmmxxkYubyGXs2AVirI3h7xVRFi4PNw0Gp9gvzdQ4AZDUi4e3xKto4hJ6hlGXMzZdh9MDnFOF8RixrPkfmrroSl0LHOWkqb6lvD7f459Pu9yzb+y9iv4zUNW3p5MJlUx4JxVhBe9xFvrq989dDBfhzlNQsbb6oaPQhGSjKDZJNea0oT/RajJdHaQ8CNQhBtLkzWZltp8FXsrmfAWtO9Fw4AcNiQok6pcUVOGB7XUkjBU+Bi/jI1lRddZpAjpfGpDIn2Ya2tra/AKlPR6n6Uea6yGjCKMi4m29JC85G6lWhM4Co3mruotNaehMiYvAc+s4Z5qzUGt3lBjKqDDyTVZBqGgVOWQlKpobFnC3LIVWA8iGKBvggp+vxwScI0ICHxev2jtU9LvF8JoLIKDSReHsyEGp330zwTTfexPe2geNtAairbtAhqdApodV7qwFJpdWe/aaA/KMK2klK+kgbOHI8y+9zC/3sfl7QBzGV/eDHB164Lrk8tdfLqQKn6x+xs+zVs4+9ZGtZklYRyzH3Nc3g3xcNvD08MQN0L4dD/E3U0Pi5s+Hu4OsBDi6+sepkIwmtYwPnOeMZo6OD5voOSkl4R/z3D+faAOL277ivB+McBfotm1jM+/djD/2sbsso3xrI6jFyDpybyJUj0jfXknji8/PuNiMcTT4xD39weCAR5ELoT08fEQp1dtHH2uKy1ew59f6phctVBumO6j7IlznVYGhWoStpOCXU+5UlB0dmRjGrVWdglzBe5aVcaNdg6prLQARnteqq8pVdc0s6oiW1J9WaVZmW27rCpzMCgh4nNDQ8PnXdZHkWt/sG1IPdyUfM1Lg1LNSX4/2JR0TjN7WCe3pVew54RV5/uJRELSNBaVC7PodNpqr4e5mN4Rs6TzMfJdzYoKael6+vBr3U5XJl7MXxjOVRtNyEJaegtNNqUd5kXLZHJHaflffwq6LzP1mHUesvL/hb8cui7SPG76yF8XFaK/PVzYEZN12SLeWwNXayHPZ0wT/wBCue2QOWupRQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/36ceda37c3234c7b985fc5e5aacfa85e/dc87c/1_2.avif 158w,\n/static/36ceda37c3234c7b985fc5e5aacfa85e/383b4/1_2.avif 315w,\n/static/36ceda37c3234c7b985fc5e5aacfa85e/11ac3/1_2.avif 578w\"\n              sizes=\"(max-width: 578px) 100vw, 578px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/36ceda37c3234c7b985fc5e5aacfa85e/5787a/1_2.webp 158w,\n/static/36ceda37c3234c7b985fc5e5aacfa85e/89f54/1_2.webp 315w,\n/static/36ceda37c3234c7b985fc5e5aacfa85e/d73f9/1_2.webp 578w\"\n              sizes=\"(max-width: 578px) 100vw, 578px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/36ceda37c3234c7b985fc5e5aacfa85e/dda05/1_2.png 158w,\n/static/36ceda37c3234c7b985fc5e5aacfa85e/679a3/1_2.png 315w,\n/static/36ceda37c3234c7b985fc5e5aacfa85e/56022/1_2.png 578w\"\n            sizes=\"(max-width: 578px) 100vw, 578px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/36ceda37c3234c7b985fc5e5aacfa85e/56022/1_2.png\"\n            alt=\"1 2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그리고 완성된 코드를 살펴본다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2eb6cd10dd62e3d36ba277ec1698246f/3bc19/1_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.13924050632912%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC7ElEQVR42oWU63qiSBiEuYYYRDmInMXzIcE4GlEEUSTOZHbv/1Zqqzub7Ca7zvz4HvjT71NVX3Ur7VYLHasDw9DRbrfRaDTkt9ePMZmO0B/GiOIQjtvh2HC9LhyH/44FL3DgBy4830HHNmBabShWhzDThKppuL+/l9Nsaoj6Pi4/1yjrJdLTI/aXJdZZjNUuwrd97++JP2a168lRdMJ0KtR0/QOoaS14oY3imqB6ecDhOMb+NMe2GMvDT2l0cxSDCs2ui1ZbR1OoVFVa1mnHRn5Z4HyZIz8OsS9GKOpEgn8JbDEvL4ygGwatNtG4u5MK/bCLkuqqywwprW7zERVOsN73sdyGt4G6WEAUIQxDBBy724WuG1JhSqvVS4KsnCM9xNjlA6x+Z7ljWYiHY8SzBfx4gK7rwjQtuARW9QKnywOKI5eST+QiVjsuQB7u3bDM3IRCx3FYHUNaFlsWCov6Aa9/bpEXzDGfIcun8v9QLGh9gGX6X+tK1+QCPA8WlZrcuMhRAEWGT1R0YobfX59QVQnq8xJFOcEqG9zMUenaHWamy0K/j0ZgEBHIzu3zIQ7nOfOb03qC7WEs+7bO+v9bIcW27TerBL318B3oSKDoYH6aYHMYYnucYFcMOOJ/KqFflSqu7yMIgpvAlApFF6/1HNV1het1gbycyW4eTgtssuEnqBJ4rgRqX66eyFBeM251S3UZb4moz57fHTt5JDRlL4X9TwrDXsyl+FDV5ifgew8vL4/c7BjH44IzQymg3PhzNkFCZV83rQz6Afq9gEBVwlT1Hu1W+00hQz9XM/z4Y4PynOBabWh1JlUlt7astzSYfLpEXT4eh39lmJcj1K9rHFmZ+iyAj4yBBRfKJPSLQmFVjAAKlSq/umH9sxRmVdaPOBC8YXbPrM23NMbymc9XNiYkRvIs4O9Xj7UR1RHvYqNxB8cLMX3aE+jyUCBfmTNfmRNnNPXg+CZ6Awej+QDZ9TsWqzmino35MpCK/wLPlClXZFXgPQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2eb6cd10dd62e3d36ba277ec1698246f/dc87c/1_3.avif 158w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/383b4/1_3.avif 315w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/d0061/1_3.avif 630w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/20e2c/1_3.avif 945w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/3da76/1_3.avif 1105w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/2eb6cd10dd62e3d36ba277ec1698246f/5787a/1_3.webp 158w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/89f54/1_3.webp 315w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/4d353/1_3.webp 630w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/0f41d/1_3.webp 945w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/6d367/1_3.webp 1105w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2eb6cd10dd62e3d36ba277ec1698246f/dda05/1_3.png 158w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/679a3/1_3.png 315w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/50637/1_3.png 630w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/fddb0/1_3.png 945w,\n/static/2eb6cd10dd62e3d36ba277ec1698246f/3bc19/1_3.png 1105w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2eb6cd10dd62e3d36ba277ec1698246f/50637/1_3.png\"\n            alt=\"1 3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>스파이로 만들라고 했는데, 자기 마음대로 spy를 지워버렸다. 그리곤 서비스 단위 테스트를 하나 더 만들어놓고는 mock을 덕지덕지 바르고는 verify 하고 있다. 이런 부분은 수정이 필요하다. 이 결과물을 AI를 통해 고친다면, 꽤 오래 걸릴 것이다. <strong>이후 코드는 직접 수정</strong>하는 것이 빠르다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Nested</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"회원가입\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> register <span class=\"token punctuation\">{</span>\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"회원 가입시 User 저장이 수행된다. ( spy 검증 )\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">saveUser_whenUserRegisters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">var</span> spyUsersRepository <span class=\"token operator\">=</span> <span class=\"token function\">spy</span><span class=\"token punctuation\">(</span>usersRepository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">UsersService</span> spyUsersService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsersService</span><span class=\"token punctuation\">(</span>spyUsersRepository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// act</span>\n\t\t<span class=\"token class-name\">UsersModel</span> result <span class=\"token operator\">=</span> spyUsersService<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testUser\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token class-name\">Gender</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MALE</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string\">\"1993-04-09\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string\">\"test@gmail.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// verify</span>\n\t\t<span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>spyUsersRepository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">existsByLoginId</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testUser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>spyUsersRepository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token function\">any</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UsersModel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">assertNotNull</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testUser\"</span><span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">getLoginId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이미 가입된 ID로 회원가입 시도 시, 실패한다.\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">failToRegister_whenLoginIdAlreadyExists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// arrange</span>\n\t\tusersService<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testUser\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token class-name\">Gender</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MALE</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string\">\"1993-04-09\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string\">\"test@gmail.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// act</span>\n\t\t<span class=\"token class-name\">CoreException</span> exception <span class=\"token operator\">=</span> <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CoreException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n\t\t\tusersService<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testUser\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t<span class=\"token class-name\">Gender</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FEMALE</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t<span class=\"token string\">\"1993-04-09\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t<span class=\"token string\">\"test@naver.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// assert</span>\n\t\t<span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">.</span><span class=\"token function\">getErrorType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ErrorType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CONFLICT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>최초의 테스트 작성은 완벽하지 않아도 된다. 테스트의 본질은 요구사항에 대한 <strong>인수</strong>와 리팩터링에 대한 <strong>회귀 방지</strong>다. 두 가지 본질을 가장 우선시하며, 읽기 좋도록 있는 힘을 다해 깔끔하게 작성하면 된다.</p>\n<p>때문에 최초 작성 시점에 AI 조수의 활약이 적절하다고 느꼈다. 다만 점차 요구사항과 도메인이 뚜렷해지면 결함을 최대한 없앨 수 있게 테스트를 향상시켜야 할 것인데, 이때부터는 정교한 완성을 위해 엔지니어의 역량이 중요할 것이다.</p>\n<h3>Green</h3>\n<p>아마 AI가 어느정도 테스트를 작성하며 필요한 파일과 클래스들을 미리 작성해두었을 것이다.\n이 파일들을 열어보며 하나씩 제대로 구현한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 307px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a94edd524ac1abd6143f7e960d2a505/c1cfc/2_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 189.873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAmCAYAAADEO7urAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEWElEQVR42pVW2XLiSBDkA2zMpQsQCIROJG7wOWM8sczsbszGRtjriH2Z+f+/yMlqaAbwAX5I1BLqVB1Z1VUwDAOWZaHdbiu4rotarQZ5Lle93r03TXP7bBfyvCCLRqOBPM/R7/fh+z4qlcp286moVqu/CW3bVqStVgv1el39+VFCbfmWUMiaJJV7RfhB0q2F8iOEEjuxsiaxYExN04IhOIjfWzAMU1tYQ5PJGC1XiCZzhIMRhnf3yK/v0F/cIJ7MMPr0oD7yXiiaXgcWDSvIje04cOly2/PgcC1WGpLJDYTsuMsVmNxX0MFsNF202p5aiyXbOOr1sYRY9tplubG46GVDmt3Fxfm5svCjGW602krPBS1cx6kjmV4iyEcol0uolMtKjxVZl0qoHtFmvdn6TajiyIAG2QB+P0fdpYQ6XTQYArfjw+12Ydcb70pJ9uwRSkC7SYpwNFFWpvMrdJI+8ptPzPoSXhi/a2V91+XtQ2Y4iUKFOOixHDNY/FDponjU5TLDYugs6zg2Ke50PEU8HCOk6w7LUDeCY4lyqJI9Cw0V2CYCkkWjKWM5UNo6NcsO95qHLos1HQo8CQMM6G6apic3ClHFnstKj9IX/QDJeIZ6o7kRdWWD94nrDNcLC20+6Po9JLNLJQN5SSDu2IynoeN5SMiPKWHrWla1SLSY5ZAlFNLC/vxaySW7vFWQe7G0zIy/1rpc6tZmcRRUNRBloiEW2g56TIqQxtSiT03GtNhnaYbjuUpWWVeRBu8dWij1XAjDEBoDJmFG3P2xwnL1DV/+/BufV19xu/yCh29/4fr+AYPJFLt7BEEQYDybIWFhFMaTCQQj4mo2x/10iuf/nvD/8zOenx7x7z/f8fT4iJ8/fuDraoU8yzDhO3qf2jseY7lcYkbSQnUTPxGuNNqI7oWTBbr5mBgiodsm6/iiWFRh0e8fYu3yYZaZpQ6zHPczhTDt8yOektOxo0A1Yt0Pd4XtiZWMS5ok8NllpEZrGw/W5fd2Gb4gFEtcdhVxs1qtoXh2RplcKNJyaX2tbNaHrazR8vZrWeJgEQGLPJ4u4KcZ++NQtTG1Zjx70i+5lp5pMjzb6hFhMzRyNu0ROnQlZEWIBqX8+otrRSiVIw0j5qkoiPifNFxNKFc59V4SEj2KM+CmZHaF7OYz0sUV8itWyuUNUhILMt6LpbohrCvFX1fKbj+Ug16EKl0mjmP02GRVArhBsvja4LQ3ORw2WJlrgl6PpJEi9HhOvzZl7eLtLG8IxTqBlJOq8cO6PcCrhBI/kwgZVJ8WinVCmFCLw+EQg8FAXWXcy1h68r9c5Z3dPrlH6MhhT1GHUYTehlQGUJnKZJDSw6geqvTo96qFhholLHgdjxWydlfcljmnJGI+cF2s0tcXhKoiynJAuUg4bTlU/Pn5GYqsECE79UzZTl+2aeA2ctAR67J867JYKWiy/Z9Kqiy0SDjz2WUokZAEEQmjDaloUmL2EcJfGw3ol5Z83cEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7a94edd524ac1abd6143f7e960d2a505/dc87c/2_1.avif 158w,\n/static/7a94edd524ac1abd6143f7e960d2a505/563df/2_1.avif 307w\"\n              sizes=\"(max-width: 307px) 100vw, 307px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/7a94edd524ac1abd6143f7e960d2a505/5787a/2_1.webp 158w,\n/static/7a94edd524ac1abd6143f7e960d2a505/e9124/2_1.webp 307w\"\n              sizes=\"(max-width: 307px) 100vw, 307px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7a94edd524ac1abd6143f7e960d2a505/dda05/2_1.png 158w,\n/static/7a94edd524ac1abd6143f7e960d2a505/c1cfc/2_1.png 307w\"\n            sizes=\"(max-width: 307px) 100vw, 307px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7a94edd524ac1abd6143f7e960d2a505/c1cfc/2_1.png\"\n            alt=\"2 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>테스트는 내가 직접 보고 원하는대로 작성했으니, 테스트를 통과시키는 회귀 방지와 함께 코드를 고친다.</p>\n<p>여기서 느낄 수 있는 주의점이 있다. 유스케이스 테스트는 <strong>블랙박스 테스트</strong> 형태를 지향해야 한다는 것. 블랙박스 테스트와 이와 대비되는 화이트박스 테스트에 대한 정의를 위키백과에서 가져왔다.</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Black-box_testing\"><strong>블랙박스 테스트</strong></a>: <strong>블랙박스 테스트는 때때로</strong> <strong>사양 기반 테스트</strong> 라고도 하며 애플리케이션의 내부 구조나 작동 방식을 들여다보지 않고 기능을 검사하는 소프트웨어 테스트 방법</li>\n<li><a href=\"https://en.wikipedia.org/wiki/White-box_testing\"><strong>화이트박스 테스트</strong></a>: <strong>화이트박스 테스트 (</strong> <strong>클리어 박스 테스트</strong> , <strong>글래스 박스 테스트</strong> , <strong>투명 박스 테스트</strong> , <strong>구조 테스트</strong> 라고도 함)는 애플리케이션의 기능이 아닌 내부 구조나 작동 방식을 테스트하는 소프트웨어 테스트 방법</li>\n</ul>\n<p><strong>화이트박스 테스트</strong>는 일반적으로 블랙박스 테스트에 비해 회귀 방지에 좋지만, 리팩터링 내성에 취약하며, <strong>블랙박스 테스트</strong>는 이와 반대다. TDD의 목적은 <strong>변화</strong>에 적응하며 요구사항을 빠르고 적절하게 <strong>구현</strong>하는 것이다. 내부가 어떻게 변할지 모른다. 최대한 블랙박스 테스트를 지향하여 작성해야 한다.</p>\n<hr>\n<h2>유스케이스 TDD 이후</h2>\n<h3>도메인 테스트</h3>\n<p>도메인 모델로 가는 것은 리펙토링에 해당한다고 생각한다. 루퍼스 과제는 요구사항이 기능 구현과 도메인 모델에서 필요한 것이 관심사에 따라 명확하게 제공된다. 하지만 현실세계에서는 요구사항을 줄 때 관심사가 구분되지 않는다.</p>\n<p>때문에 이를 반영해서 유스케이스에 대한 블랙박스 테스트 + 통합 테스트로 우선 작성하고, 이후 도메인 모델과 도메인 테스트를 작성했다.</p>\n<p>도메인 테스트 작성에는 모든 공유 자원들을 떼어내는 단위 테스트로써 작성했다. (사실 도메인 모델에서는 공유자원이 쓰이지도 않았다.)</p>\n<h3>E2E 테스트</h3>\n<p>유스케이스와 도메인 테스트까지 모두 완성했다는 것은 애플리케이션이 완성되었음을 의미한다.</p>\n<p>이 때, 반드시 추가적으로 필요한 테스트가 있다. 애플리케이션의 사용자가 애플리케이션을 사용하기 위해서는 적절한 인터페이스를 제공해야한다. 인터페이스가 적절하지 않는다면, 아무리 잘 만들어진 애플리케이션이라도 무용지물이다. 때문에 이런 인터페이스들에 대한 테스트를 작성해줘야한다.</p>\n<p>그 중 E2E 테스트는 서버 애플리케이션과 인프라 사이에 어디서 문제가 발생하는지 명확하게 보여주는 테스트다. 때문에 모든 기능 구현 후, 마지막으로 작성했다.</p>\n<hr>\n<p>내 애플리케이션 작업 프로세스는 절대적이지 않다. 테스트를 작성하는 방법은 매우 다양하고, 효율적으로 작성하기 위해 어떤 방법을 선택해야하는지도 많은 이들이 지금도 논쟁을 벌이고 있다.</p>\n<p>중요한 것은 애플리케이션에 테스트 코드가 있느냐다. 그래서 이 <strong>테스트 코드가 애플리케이션의 회귀 방지와 인수의 역할을 제공하느냐</strong>다. 그렇다면 충분하다. 이제 어떻게 테스트를 효율적이고 빠르게 작성할 수 있을지 고민할 차례다. 내 방법은 그 고민의 초입지에 있다. 유스케이스 테스트 작성을 가장 우선시하고, 이후 도메인 모델의 세부 사항을 구현. 마지막으로 인터페이스를 비롯한, 외부와의 경계가 정상적으로 작동되는지의 테스트의 작성과 구현.</p>\n<p>분명히 더 실용적인 방법도 있을 것이며, 케이스마다 베스트 프렉티스가 다를 수도 있다. 이런 프로세스에 대한 고민과 문제 해결은 무가치하지 않다. 개발 생산성을 향상시킴으로써 비즈니스의 생산성으로 연계된다.</p>\n<p>테스트는 정답이 없다. 하지만 방향은 분명하다. 테스트 코드를 작성하고, XP하자!</p>","images":null,"frontmatter":{"title":"실전 TDD 회고","date":"July 14, 2025","description":"가장 효율적이고 빠르게 작성 가능한 TDD에 대한 고민 (feat. 바이브 코딩)","category":["회고"],"featuredImage":null}},"previous":{"fields":{"slug":"/회고/shairport-sync/shairport-sync/"},"frontmatter":{"title":"airplay 네트워크 플레이어 구성 회고","category":["회고","취미"]}},"next":null},"pageContext":{"id":"ae17b33a-162e-5173-8078-531428d19898","previousPostId":"6ce4593c-f1da-55b1-88c5-0b420618232d","nextPostId":null}},"staticQueryHashes":["1408108323","3764592887","62622001"],"slicesMap":{}}